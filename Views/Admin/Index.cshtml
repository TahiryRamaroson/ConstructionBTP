@{
	ViewData["Title"] = "Devis";
	Layout = "_Layout_Admin";
}

@model List<V_devisAdmin_Affichage>

<div class="container">
    <div class="text-center mt-10">
        <h1>Liste des devis en cours</h1>
    </div>
	<div class="row mt-10">
		<div class="offset-md-1 col-md-10 offset-md-1">
			<div class="table-responsive">
				<table class="table table-rounded border gy-6 gs-6">
				<thead>
					<tr class="fw-semibold fs-6 text-gray-800 border-bottom border-gray-200">
						<th>Id</th>
						<th>Contact</th>
						<th>Date du devis</th>
						<th>Type de maison</th>
						<th>Type de finition</th>
						<th>Début des travaux</th>
						<th>Montant total</th>
						<th>Paiement effectué</th>
						<th>Pourcentage paiement</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model)
						{
							<tr class="
							@if(@item.pourcentagePaiement > 50){
								<text>bg-light-success</text>
							}
							@if(@item.pourcentagePaiement < 50){
								<text>bg-light-danger</text>
							}
							">
								<td>@item.id</td>
								<td>@item.numTel</td>
								<td>@item.dateCreation.ToString("dd MMMM yyyy")</td>
								<td>@item.nomMaison</td>
								<td>@item.nomFinition</td>
								<td>@item.debutTravaux.ToString("dd MMMM yyyy")</td>
								<td>@item.montantTotal.ToString("N") Ar</td>
								<td>@item.totalPaiement.ToString("N") Ar</td>
								<td>@item.pourcentagePaiement.ToString("N") %</td>
								<td><a asp-action="DetailsTravaux" asp-controller="Admin" asp-route-devis="@item.id">Voir plus</a></td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="text-center mt-5">
		<ul class="pagination pagination-circle pagination-outline">
			@if (ViewBag.CurrentPage > 1)
			{
				<li class="page-item previous m-1"><a asp-action="Index" asp-controller="Admin" asp-route-pg="@(ViewBag.CurrentPage - 1)" class="page-link"><i class="previous"></i></a></li>
			}
			@for (var i = 1; i <= ViewBag.PageCount; i++)
			{
				if (i >= ViewBag.CurrentPage - 1 && i <= ViewBag.CurrentPage + 1)
				{
					<li class="page-item @(ViewBag.CurrentPage == i ? "active" : "") m-1"><a asp-action="Index" asp-controller="Admin" asp-route-pg="@i" class="page-link">@i</a></li>
				}
			}
			@if (ViewBag.CurrentPage < ViewBag.PageCount)
			{
				<li class="page-item next m-1"><a asp-action="Index" asp-controller="Admin" asp-route-pg="@(ViewBag.CurrentPage + 1)" class="page-link"><i class="next"></i></a></li>
			}
		</ul>


	</div>


</div>